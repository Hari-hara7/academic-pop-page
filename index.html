<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Academic Pal Pop-up</title>
<link rel="icon" href="favicon.ico" type="image/x-icon">
<link rel="manifest" href="/manifest.json">

<style>
  body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden;
    perspective: 1000px;
    background-color: #000;
  }

  .background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: -1;
  }

  .particle {
    position: absolute;
    width: 2px;
    height: 2px;
    background-color: #ff9966;
    opacity: 0.8;
    border-radius: 50%;
    transform-style: preserve-3d;
  }

  .popup-container {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    animation: fadeIn 2s ease-in-out;
    position: relative;
    z-index: 1;
  }

  .popup {
    text-align: center;
    border: 2px solid #000000;
    padding: 20px;
    color: white; 
    background-color: #000000;
    border-radius: 10px;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
  }

  .logo {
    margin-bottom: 20px;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  #custom-add-to-home-screen {
  position: fixed;
  bottom: 10px;
  left: 10px;
  right: 10px;
  background: white;
  border: 1px solid #ccc;
  padding: 20px;
  text-align: center;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

</style>
</head>
<body>

<div class="background"></div>

<div class="popup-container">
  <div class="popup">
    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRGDizIH8HMP5y6qTldEpO8VZEd6X0UiSrYFw&usqp=CAU" alt="Academic Pal Logo" class="logo" width="150" height="150">
    <h1> Academic Pal &#127891;</h1>
  </div>
</div>


<div id="custom-add-to-home-screen" style="display:none;">
  <p>Add Academic Pal to your home screen for quick access!</p>
  <button id="add-to-home-screen-button">Add to Home Screen</button>
  <button id="dismiss-button">Dismiss</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  const addToHomeScreen = document.getElementById('custom-add-to-home-screen');
  const addToHomeScreenButton = document.getElementById('add-to-home-screen-button');
  const dismissButton = document.getElementById('dismiss-button');
  const maxPrompts = 100;
  const promptCountKey = 'addToHomeScreenPromptCount';

  // Function to show the prompt
  function showPrompt() {
    addToHomeScreen.style.display = 'block';
  }

  // Function to hide the prompt
  function hidePrompt() {
    addToHomeScreen.style.display = 'none';
  }

  // Check if the user has seen the prompt less than 5 times
  let promptCount = localStorage.getItem(promptCountKey) || 0;
  if (promptCount < maxPrompts) {
    showPrompt();
  }

  // Event listener for the "Add to Home Screen" button
  addToHomeScreenButton.addEventListener('click', function() {
    hidePrompt();
    // Increment the prompt count and store it
    promptCount++;
    localStorage.setItem(promptCountKey, promptCount);
  });

  // Event listener for the "Dismiss" button
  dismissButton.addEventListener('click', function() {
    hidePrompt();
    // Increment the prompt count and store it
    promptCount++;
    localStorage.setItem(promptCountKey, promptCount);
  });

  // Show native "Add to Home Screen" prompt if available
  let deferredPrompt;
  window.addEventListener('beforeinstallprompt', (e) => {
    // Prevent the mini-infobar from appearing on mobile
    e.preventDefault();
    // Stash the event so it can be triggered later
    deferredPrompt = e;

    addToHomeScreenButton.addEventListener('click', () => {
      // Show the install prompt
      deferredPrompt.prompt();
      // Wait for the user to respond to the prompt
      deferredPrompt.userChoice.then((choiceResult) => {
        if (choiceResult.outcome === 'accepted') {
          console.log('User accepted the A2HS prompt');
        } else {
          console.log('User dismissed the A2HS prompt');
        }
        deferredPrompt = null;
      });
    });
  });
});





  const background = document.querySelector('.background');
  const numParticles = 200;

  function createParticle() {
    const particle = document.createElement('div');
    particle.classList.add('particle');
    particle.style.left = `${Math.random() * 100}vw`;
    particle.style.top = `${Math.random() * 100}vh`;
    background.appendChild(particle);

    const tl = gsap.timeline({ repeat: -1 });
    tl.to(particle, {
      duration: Math.random() * 4 + 2,
      x: Math.random() * 200 - 100,
      y: Math.random() * 200 - 100,
      z: Math.random() * -400 - 200,
      opacity: 0,
      ease: "power1.inOut",
    });
  }

  // Create multiple particles
  for (let i = 0; i < numParticles; i++) {
    createParticle();
  }

  setTimeout(function() {
    window.location.href = "https://academicpal.vercel.app/"; // Replace "https://yourwebsite.com" with your actual website URL
  }, 5000); // 5 seconds



  if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('/service-worker.js').then(function(registration) {
      console.log('Service Worker registered with scope:', registration.scope);
    }, function(error) {
      console.log('Service Worker registration failed:', error);
    });
  });
}

</script>

</body>
</html>
